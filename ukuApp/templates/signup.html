<!DOCTYPE html>
<!-- saved from url=(0029)http://zhichongjia.com/uku/#/ -->
<html lang="zh">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <link href="https://res.wx.qq.com/open/libs/weui/1.1.2/weui.css" rel="stylesheet">
    <link href="../static/common/css/page.css" rel="stylesheet">
    <script type="text/javascript" src="../static/vendor/js/jquery-3.2.1.min.js"></script>

    <title>uku App</title>

    <script>
        $(function(){
            var nameHtml = '<div class="weui-cell"><div class="weui-cell__hd"><label class="weui-label">姓名</label></div><div class="weui-cell__bd"><input class="weui-input" name="name" type="text" placeholder="请输入姓名" oninput="validation();"></div></div>'
            var phoneHtml = '<div class="weui-cell"><div class="weui-cell__hd"><label class="weui-label">电话</label></div><div class="weui-cell__bd"><input class="weui-input" name="phoneNum" type="tel" placeholder="请输入电话号码" oninput="validation();"></div></div>'
            var schoolHtml = '<div class="weui-cell"><div class="weui-cell__hd"><label class="weui-label">学校</label></div><div class="weui-cell__bd"><input class="weui-input" name="school" type="text" placeholder="请输入学校" oninput="validation();"></div></div>'
            var addrHtml = '<div class="weui-cell"><div class="weui-cell__hd"><label class="weui-label">地址</label></div><div class="weui-cell__bd"><input class="weui-input" name="address" type="text" placeholder="请输入地址" oninput="validation();"></div></div>'
            var idNumHtml = '<div class="weui-cell"><div class="weui-cell__hd"><label class="weui-label">学生证号</label></div><div class="weui-cell__bd"><input class="weui-input" name="idNum" type="number" placeholder="请输入学生证号" oninput="validation();"></div></div>'
            var remarkHtml = '<div class="weui-cell"><div class="weui-cell__hd"><label class="weui-label">备注</label></div><div class="weui-cell__bd"><input class="weui-input" name="remark" type="text" placeholder="请输入备注" oninput="validation();"></div></div>'

            var productHtml = '<div class="weui-cells_radio" id="product_list">'+
                '{% for product in productList.all %}'+
                '<label class="weui-cell weui-check__label" for="ac{{forloop.counter}}">'+
                    '<div class="weui-cell__bd">'+
                        '<p>备选琴{{forloop.counter}}:     {{ product.title_text }}</p>'+
                    '</div>'+
                    '<div class="weui-cell__ft">{{ product.desc_text }}'+
                        '<input type="radio" class="weui-check" name="ac_radio" id="ac{{forloop.counter}}">'+
                        '<span class="weui-icon-checked"></span>'+
                    '</div>'+
                '</label>'+
                '{% endfor %}'+
                '</div>'

            var fieldListDiv = document.getElementById( 'fieldListDiv' );

            fieldListDiv.insertAdjacentHTML( 'beforeend', nameHtml );
            fieldListDiv.insertAdjacentHTML( 'beforeend', phoneHtml );
            fieldListDiv.insertAdjacentHTML( 'beforeend', addrHtml );
            fieldListDiv.insertAdjacentHTML( 'beforeend', schoolHtml );
            fieldListDiv.insertAdjacentHTML( 'beforeend', idNumHtml );
             fieldListDiv.insertAdjacentHTML( 'beforeend', remarkHtml );

            var fieldList = "{{activity.fields_to_display}}";
            if(fieldList == "租用"){
                fieldListDiv.insertAdjacentHTML( 'beforeend', productHtml );
            }
        });

        function submit(){
            document.getElementById("myForm").submit();
        }

        function validation(){
            allFieldHasValue = true;
            $('.weui-input').each(function(){
                allFieldHasValue = allFieldHasValue && ($(this).val()?true:false);
            });
            allFieldHasValue ? $('#confirm_btn').removeClass('disabled') : $('#confirm_btn').addClass('disabled');
        }


    </script>
</head>
<body>
<div id="page-container">
    <div class="page" style="">
        <div class="weui-article">
            <h1 class="highlight">{{activity.title_text}}</h1>
            <p class="indent">报名时间： {{activity.start_date}} 到 {{activity.end_date}}</p>
            <p class="indent">{{activity.desc_text}}</p>
        </div>
        <div class="weui-cells__title links">请输入报名信息</div>
        <form id='myForm' action="confirmation" METHOD="POST">
            {% csrf_token %}
            <input type="hidden" name="act_id" value="{{ act_id }}">
            <div class="weui-cells weui-cells_form" id="fieldListDiv">

            </div>

            <a class="bottom-docked disabled" id="confirm_btn" onclick="submit();">提交资料</a>
        </form>
    </div>
</div>

</body>
</html>